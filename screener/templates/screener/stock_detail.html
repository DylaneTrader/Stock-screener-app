{% extends 'screener/base.html' %}

{% block title %}{{ stock.symbol }} - Stock Detail{% endblock %}

{% block content %}
<div class="stock-detail-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="color: #333;">{{ stock.symbol }} - {{ stock.name }}</h2>
        <a href="{% url 'screener:home' %}" class="btn">‚Üê Back to Screener</a>
    </div>
    
    <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 30px;">
        <h3 style="color: #667eea; margin-bottom: 20px;">Stock Information</h3>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">Current Price</div>
                <div style="font-size: 1.8em; font-weight: bold; color: #667eea;">
                    ${{ stock.current_price|floatformat:2|default:"N/A" }}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">Market Cap</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #333;">
                    {% if stock.market_cap %}
                        ${{ stock.market_cap|floatformat:0 }}
                    {% else %}
                        N/A
                    {% endif %}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">P/E Ratio</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #333;">
                    {{ stock.pe_ratio|floatformat:2|default:"N/A" }}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">Dividend Yield</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #333;">
                    {% if stock.dividend_yield %}
                        {{ stock.dividend_yield|floatformat:2 }}%
                    {% else %}
                        N/A
                    {% endif %}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">52 Week High</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #4caf50;">
                    ${{ stock.fifty_two_week_high|floatformat:2|default:"N/A" }}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">52 Week Low</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #f44336;">
                    ${{ stock.fifty_two_week_low|floatformat:2|default:"N/A" }}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">Volume</div>
                <div style="font-size: 1.5em; font-weight: bold; color: #333;">
                    {% if stock.volume %}
                        {{ stock.volume|floatformat:0 }}
                    {% else %}
                        N/A
                    {% endif %}
                </div>
            </div>
            
            <div style="padding: 15px; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">Last Updated</div>
                <div style="font-size: 1.2em; font-weight: bold; color: #333;">
                    {{ stock.last_updated|date:"Y-m-d H:i" }}
                </div>
            </div>
        </div>
    </div>
    
    <div style="background: #fff3cd; padding: 20px; border-radius: 8px; border: 1px solid #ffc107;">
        <h3 style="color: #856404; margin-bottom: 15px;">Company Details</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
            <div>
                <strong style="color: #856404;">Sector:</strong> 
                <span style="color: #333;">{{ stock.sector|default:"Not Available" }}</span>
            </div>
            <div>
                <strong style="color: #856404;">Industry:</strong> 
                <span style="color: #333;">{{ stock.industry|default:"Not Available" }}</span>
            </div>
        </div>
    </div>
    
    {% if info %}
    <div style="margin-top: 30px; background: #e3f2fd; padding: 20px; border-radius: 8px; border: 1px solid #2196f3;">
        <h3 style="color: #1565c0; margin-bottom: 15px;">üìä Additional Information</h3>
        <div style="color: #333; line-height: 1.8;">
            {% if info.longBusinessSummary %}
            <p style="margin-bottom: 15px;">
                <strong>Description:</strong><br>
                {{ info.longBusinessSummary }}
            </p>
            {% endif %}
            
            {% if info.website %}
            <p>
                <strong>Website:</strong> 
                <a href="{{ info.website }}" target="_blank" style="color: #2196f3;">{{ info.website }}</a>
            </p>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
